From 55c348bcc1a4b48d134a262976374874d8ab205e Mon Sep 17 00:00:00 2001
From: Matt Madison <matt@madison.systems>
Date: Wed, 3 Sep 2025 05:46:26 -0700
Subject: [PATCH 2/2] MdePkg/BaseFdtLib: fix build with gcc 15

gcc 15 switched to use the new ISO C23 standard by default.
'bool', 'true' and 'false' are keywords in C23, so do not
try to define them.

Upstream-Status: Backport [https://github.com/tianocore/edk2/pull/10647]
Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>
Signed-off-by: Matt Madison <matt@madison.systems>
---
 MdePkg/Library/BaseFdtLib/LibFdtSupport.h | 22 +++++++++++++---------
 1 file changed, 13 insertions(+), 9 deletions(-)

diff --git a/MdePkg/Library/BaseFdtLib/LibFdtSupport.h b/MdePkg/Library/BaseFdtLib/LibFdtSupport.h
index 8a26fbfc32..05f758a93d 100644
--- a/MdePkg/Library/BaseFdtLib/LibFdtSupport.h
+++ b/MdePkg/Library/BaseFdtLib/LibFdtSupport.h
@@ -14,17 +14,21 @@
 #include <Library/BaseLib.h>
 #include <Library/BaseMemoryLib.h>
 
-typedef UINT8    uint8_t;
-typedef UINT16   uint16_t;
-typedef INT32    int32_t;
-typedef UINT32   uint32_t;
-typedef UINT64   uint64_t;
-typedef UINTN    uintptr_t;
-typedef UINTN    size_t;
-typedef BOOLEAN  bool;
-
+typedef UINT8   uint8_t;
+typedef UINT16  uint16_t;
+typedef INT32   int32_t;
+typedef UINT32  uint32_t;
+typedef UINT64  uint64_t;
+typedef UINTN   uintptr_t;
+typedef UINTN   size_t;
+
+#if defined __STDC_VERSION__ && __STDC_VERSION__ > 201710L
+/* bool, true and false are keywords.  */
+#else
+typedef BOOLEAN bool;
 #define true   (1 == 1)
 #define false  (1 == 0)
+#endif
 
 //
 // Definitions for global constants used by libfdt library routines
-- 
2.43.0

