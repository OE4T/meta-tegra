From 1fcea2a2896c43b27c82b668edd26452378aba8a Mon Sep 17 00:00:00 2001
From: Jon Mason <jon.mason@arm.com>
Date: Fri, 10 Oct 2025 05:40:01 -0700
Subject: [PATCH] work around visibility issue

gn commit 46b572ce4ceedfe57f4f84051bd7da624c98bf01 "fixed" the
visibility field not applying to public configs.  This caused dtc to
have issues due to libfdt and others not being specified.  Due to the
number, it was cleaner to remove the visibility field (which defaults to
everything being visible).

Upstream-Status: Pending [Not submitted to upstream yet]
Signed-off-by: Jon Mason <jon.mason@arm.com>
Signed-off-by: Ilies CHERGUI <ichergui@nvidia.com>
Signed-off-by: Matt Madison <matt@madison.systems>
---
 dtc/BUILD.gn        | 1 -
 googletest/BUILD.gn | 1 -
 2 files changed, 2 deletions(-)

diff --git a/dtc/BUILD.gn b/dtc/BUILD.gn
index f55560c..d60c3e3 100644
--- a/dtc/BUILD.gn
+++ b/dtc/BUILD.gn
@@ -5,7 +5,6 @@
 # https://opensource.org/licenses/BSD-3-Clause.
 
 config("libfdt_config") {
-  visibility = [ ":gtest" ]
   include_dirs = [
     "libfdt",
     "hafnium_inc",
diff --git a/googletest/BUILD.gn b/googletest/BUILD.gn
index 667cbd1..e728d69 100644
--- a/googletest/BUILD.gn
+++ b/googletest/BUILD.gn
@@ -5,7 +5,6 @@
 # https://opensource.org/licenses/BSD-3-Clause.
 
 config("gtest_config") {
-  visibility = [ ":gtest" ]
 
   include_dirs = [
     "googletest/include",
